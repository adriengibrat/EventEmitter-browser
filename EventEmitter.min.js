(function(){"use strict";function EventEmitter(){this.domain=null;this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}EventEmitter.EventEmitter=EventEmitter;EventEmitter.usingDomains=false;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.domain=undefined;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.prototype.addListener=EventEmitter.prototype.on=function(event,listener){if(typeof listener!=="function"){throw TypeError("listener must be a function")}this.emit("newListener",event,typeof listener.listener==="function"?listener.listener:listener);var listeners=this._events[event]||(this._events[event]=[]),max=this._maxListeners||EventEmitter.defaultMaxListeners,count=listeners.push(listener);if(max>0&&!listeners.warned&&count>max){listeners.warned=true;console.error('warning: possible EventEmitter memory leak detected. %d "%s" listeners added.'+"Use emitter.setMaxListeners() to increase limit.",count,event);console.trace()}return this};EventEmitter.prototype.once=function(event,listener){if(typeof listener!=="function"){throw TypeError("listener must be a function")}var fired=false,once=function(){this.removeListener(event,once);if(!fired){fired=true;listener.apply(this,arguments)}};once.listener=listener;this.on(event,once);return this};EventEmitter.prototype.removeListener=function(event,listener){if(typeof listener!=="function"){throw TypeError("listener must be a function")}var listeners=this._events[event],index=listeners.length;if(index){while(~--index&&(!(index in listeners)||listener!==(listeners[index].listener||listeners[index])));if(~index){listeners.splice(index,1);this.emit("removeListener",event,listener)}}return this};EventEmitter.prototype.removeAllListeners=function(event){if(arguments.length===0){if(this._events.removeListener){for(var key in this._events){if(key!=="removeListener"){this.removeAllListeners(key)}}this.removeAllListeners("removeListener")}this._events={}}else{var listeners=this._events[event];while(listeners.length){this.removeListener(event,listeners[listeners.length-1])}delete this._events[event]}return this};EventEmitter.prototype.setMaxListeners=function(n){if(!typeof n==="number"||n<0||isNaN(n)){throw TypeError("n must be a positive number")}this._maxListeners=n;return this};EventEmitter.prototype.listeners=function(event){return this._events[event]?this._events[event].slice():[]};EventEmitter.prototype.emit=function(event){var listeners=this._events[event],length=listeners.length,index=0;if(!length){if(event==="error"){var error=arguments[1];throw error instanceof Error?error:Error('Uncaught, unspecified "error" event.')}return false}if(arguments.length>1){var args=Array.prototype.slice.call(arguments,1);while(index<length){listeners[index++].apply(this,args)}}else{while(index<length){listeners[index++].call(this)}}return true};EventEmitter.listenerCount=function(emitter,event){return emitter.listeners(event).length};if(typeof define==="function"&&define.amd){define(function(){return EventEmitter})}else if(typeof module==="object"&&module.exports){module.exports=EventEmitter}else{var self=this,original=self.EventEmitter;EventEmitter.noConflict=function(){self.EventEmitter=original;return EventEmitter};this.EventEmitter=EventEmitter}}).call(this);
//# sourceMappingURL=EventEmitter.map